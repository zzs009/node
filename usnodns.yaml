port: 7890
allow-lan: true
mode: rule
log-level: info
unified-delay: true
global-client-fingerprint: chrome
ipv6: false # æ ¸å¿ƒï¼šä¸¥å¯†å°é” IPv6 æ³„éœ²é€šé“

# 1. DNS æ·±åº¦ä¼˜åŒ–
dns:
  enable: true
  listen: :53
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  default-nameserver:
    - 119.29.29.29
    - 223.5.5.5
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  proxy-server-nameserver:
    - 8.8.8.8
  # æè‡´é˜²æ³„éœ²ï¼šåªæœ‰æ˜ç¡®æ˜¯å›½å†…åŸŸåæ‰ç”¨å›½å†… DNS è§£æ
  nameserver-policy:
    "geosite:cn,apple,microsoft": [https://dns.alidns.com/dns-query, 223.5.5.5]

# 2. æµé‡å—…æ¢
sniffer:
  enable: true
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
  force-domain:
    - "+"

# 3. èŠ‚ç‚¹é…ç½®
proxies:
  - name: vless-reality-vision-us
    type: vless
    server: 35.212.208.219
    port: 21934
    uuid: 651343df-0fb6-445d-9e79-143b2b7b7acf
    network: tcp
    udp: true
    tls: true
    flow: xtls-rprx-vision
    servername: apple.com
    reality-opts:
      public-key: TAgdTjUWwUBJndvxb718lwG7foitGRVq-xqw3gzcM0s
      short-id: 0cbdd63a
    client-fingerprint: chrome

  - name: hysteria2-us
    type: hysteria2
    server: 35.212.208.219
    port: 33251
    password: 651343df-0fb6-445d-9e79-143b2b7b7acf
    alpn: [h3]
    sni: www.bing.com
    skip-cert-verify: true
    fast-open: true

  - name: tuic5-us
    type: tuic
    server: 35.212.208.219
    port: 42361
    uuid: 651343df-0fb6-445d-9e79-143b2b7b7acf
    password: 651343df-0fb6-445d-9e79-143b2b7b7acf
    alpn: [h3]
    reduce-rtt: true
    sni: www.bing.com
    skip-cert-verify: true

# 4. ç­–ç•¥ç»„
proxy-groups:
  - name: ğŸŒ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - ğŸš€ è‡ªåŠ¨é€‰æ‹©
      - vless-reality-vision-us
      - hysteria2-us
      - tuic5-us
      - DIRECT

  - name: ğŸš€ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: https://www.gstatic.com/generate_204
    interval: 300
    proxies:
      - vless-reality-vision-us
      - hysteria2-us
      - tuic5-us

# 5. è§„åˆ™é›†ï¼šåŠ å›ºç‰ˆé€»è¾‘
rules:
  # A. å†…ç½‘ä¸ç‰¹æ®Šè§„åˆ™
  - GEOIP,LAN,DIRECT,no-resolve
  - DOMAIN-SUFFIX,services.googleapis.cn,ğŸŒ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,xn--ngstr-lra8j.com,ğŸŒ èŠ‚ç‚¹é€‰æ‹©
  
  # B. å¹¿å‘Šæ‹¦æˆªï¼ˆå¯é€‰ï¼‰
  - GEOSITE,category-ads-all,REJECT

  # C. å›½å†…æµé‡ç›´æ¥åˆ†æµï¼ˆå‡å°‘å›½å¤–è¯·æ±‚è¢«å›½å†…è§£æçš„å¯èƒ½ï¼‰
  - GEOSITE,CN,DIRECT
  - GEOSITE,apple-cn,DIRECT
  - GEOSITE,microsoft-cn,DIRECT
  
  # D. å›½å†… IP å…œåº•ï¼ˆno-resolve å…³é”®ï¼šä¸åŒ¹é…æ—¶ä¸è§£æ DNSï¼‰
  - GEOIP,CN,DIRECT,no-resolve

  # E. ç»ˆæå…œåº•ï¼šæœªå‘½ä¸­ä¸Šè¿°è§„åˆ™çš„ï¼ˆå…¨æ˜¯éä¸­å›½æµé‡ï¼‰å…¨éƒ¨ä»£ç†
  - MATCH,ğŸŒ èŠ‚ç‚¹é€‰æ‹©
